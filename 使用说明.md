# Lean优化模块AI功能测试说明

## 🎯 测试目标
验证Lean优化模块的AI功能是否正常工作，确保每个子模块能生成不同的个性化建议。

## 📋 测试步骤

### 1. 测试页面验证
1. 打开 `test_ai.html` 文件
2. 点击"检查函数定义"按钮
3. 确认所有函数都显示 ✅ 已定义
4. 点击"测试AI API"按钮
5. 确认AI API调用成功
6. 点击"测试建议生成"按钮
7. 查看生成的个性化建议

### 2. 主页面测试
1. 打开 `index_improved.html` 文件
2. 上传一个产品文档（或使用现有文档）
3. 进入Lean优化模块
4. 点击不同的方案领域：
   - 材料选择
   - 生产工艺
   - 供应链管理
   - 产品设计
   - 包装方案
5. 观察每个领域是否生成不同的建议

## 🔍 验证要点

### ✅ 成功标准
- 每个领域生成的建议标题不同
- 建议内容针对具体产品类型
- 建议描述包含产品特定信息
- AI API调用成功
- 加载状态正常显示

### ❌ 问题识别
- 所有领域显示相同建议
- 建议内容过于通用
- AI API调用失败
- 函数未定义错误

## 🛠️ 调试方法

### 1. 浏览器控制台
- 按F12打开开发者工具
- 查看Console标签页
- 检查是否有错误信息
- 查看AI API调用日志

### 2. 网络检查
- 在Network标签页查看API请求
- 确认请求状态码为200
- 检查响应内容格式

### 3. 函数检查
- 在Console中输入：`typeof window.generatePersonalizedSuggestions`
- 应该返回 "function"
- 检查其他函数是否正确定义

## 📊 预期结果

### 材料选择领域
- 建议标题应包含"生物基材料"、"循环材料"、"轻量化"等关键词
- 针对电子产品应包含"芯片"、"电路"等特定内容

### 生产工艺领域
- 建议标题应包含"精益生产"、"清洁能源"、"余热回收"等关键词
- 针对具体产品类型提供相应的工艺建议

### 供应链管理领域
- 建议标题应包含"就近采购"、"数字化管理"、"敏捷协作"等关键词
- 考虑产品供应链特点

## 🔧 故障排除

### 问题1: 函数未定义
**解决方案**：
- 检查script标签加载顺序
- 确认函数定义在全局作用域
- 重新加载页面清除缓存

### 问题2: AI API调用失败
**解决方案**：
- 检查网络连接
- 验证API密钥有效性
- 查看API响应错误信息

### 问题3: 建议内容相同
**解决方案**：
- 检查AI提示词是否正确
- 验证产品信息是否正确传递
- 确认JSON解析是否成功

## 📝 测试记录

请在测试时记录以下信息：

| 测试项目 | 预期结果 | 实际结果 | 状态 |
|---------|---------|---------|------|
| 函数定义检查 | 所有函数已定义 | | |
| AI API调用 | 调用成功 | | |
| 材料选择建议 | 个性化内容 | | |
| 生产工艺建议 | 个性化内容 | | |
| 供应链管理建议 | 个性化内容 | | |
| 产品设计建议 | 个性化内容 | | |
| 包装方案建议 | 个性化内容 | | |

## 🎉 成功标志

当所有测试项目都显示个性化内容时，说明AI功能已经成功实现：

- ✅ 每个领域生成不同的建议
- ✅ 建议内容针对具体产品
- ✅ AI API正常工作
- ✅ 用户界面响应良好

## 📞 技术支持

如果遇到问题，请：
1. 检查浏览器控制台错误信息
2. 确认网络连接正常
3. 验证API密钥有效性
4. 查看测试页面结果